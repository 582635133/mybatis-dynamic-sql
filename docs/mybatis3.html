<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 10 December 2017 
 | Rendered using Apache Maven Fluido Skin 1.6
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20171210" />
    <meta http-equiv="Content-Language" content="en" />
    <title>MyBatis Dynamic SQL &#x2013; Specialized Support for MyBatis3</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.6.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
      <script type="text/javascript" src="../js/apache-maven-fluido-1.6.min.js"></script>
      </head>
    <body class="topBarDisabled">
      <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="../docs/introduction.html" id="bannerLeft"><h2>MyBatis Dynamic SQL</h2>
</a></div>
        <div class="pull-right"><a href="../../" id="bannerRight" title="MyBatis logo"><img src="http://mybatis.github.io/images/mybatis-logo.png"  alt="MyBatis logo"/></a></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 10 December 2017<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.0.0-SNAPSHOT</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
<ul class="nav nav-list">
          <li class="nav-header">User's Guide</li>
    <li><a href="../docs/introduction.html" title="Introduction"><span class="none"></span>Introduction</a>  </li>
    <li><a href="../docs/quickStart.html" title="Quick Start"><span class="none"></span>Quick Start</a>  </li>
    <li><a href="../docs/whereClauses.html" title="WHERE Clause Support"><span class="none"></span>WHERE Clause Support</a>  </li>
    <li><a href="../docs/select.html" title="SELECT Statements"><span class="none"></span>SELECT Statements</a>  </li>
    <li><a href="../docs/delete.html" title="DELETE Statements"><span class="none"></span>DELETE Statements</a>  </li>
    <li><a href="../docs/insert.html" title="INSERT Statements"><span class="none"></span>INSERT Statements</a>  </li>
    <li><a href="../docs/update.html" title="UPDATE Statements"><span class="none"></span>UPDATE Statements</a>  </li>
    <li class="active"><a href="#"><span class="none"></span>MyBatis3 Support</a>
  </li>
    <li><a href="../docs/spring.html" title="Spring Support"><span class="none"></span>Spring Support</a>  </li>
    <li><a href="../docs/howItWorks.html" title="How it Works"><span class="none"></span>How it Works</a>  </li>
    <li><a href="../docs/extending.html" title="Extending the Library"><span class="none"></span>Extending the Library</a>  </li>
    <li><a href="../docs/codingStandards.html" title="Coding Standards"><span class="none"></span>Coding Standards</a>  </li>
    <li><a href="../docs/motivation.html" title="Motivation"><span class="none"></span>Motivation</a>  </li>
          <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a>  </li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a>  </li>
  </ul>
          <hr />
          <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
  <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
              </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>Specialized Support for MyBatis3</h1>
<p>Most of the examples shown on this site are for usage with MyBatis3. But the library does have some additional support for MyBatis3 beyond what is shown in the other examples.</p>
<p>This support is added to the DELETE, SELECT, and UPDATE statement generators and enables the creating of reusable &#x201c;by example&#x201d; methods as delivered in MyBatis Generator. These methods can provide some boilerplate code for the setup of the statement (a column list and table name for example), and allow the user to specify a where clause.</p>
<p>For example, it is possible to write a mapper like this:</p>

<div class="source">
<div class="source"><pre class="prettyprint">import static examples.simple.SimpleTableDynamicSqlSupport.*;

import java.util.List;

import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Result;
import org.apache.ibatis.annotations.Results;
import org.apache.ibatis.annotations.SelectProvider;
import org.apache.ibatis.type.JdbcType;
import org.mybatis.dynamic.sql.select.MyBatis3SelectModelAdapter;
import org.mybatis.dynamic.sql.select.QueryExpressionDSL;
import org.mybatis.dynamic.sql.select.SelectDSL;
import org.mybatis.dynamic.sql.select.render.SelectStatement;
import org.mybatis.dynamic.sql.util.SqlProviderAdapter;

@Mapper
public interface SimpleTableAnnotatedMapper {
    
    @SelectProvider(type=SqlProviderAdapter.class, method=&quot;select&quot;)
    @Results(id=&quot;SimpleTableResult&quot;, value= {
            @Result(column=&quot;A_ID&quot;, property=&quot;id&quot;, jdbcType=JdbcType.INTEGER, id=true),
            @Result(column=&quot;first_name&quot;, property=&quot;firstName&quot;, jdbcType=JdbcType.VARCHAR),
            @Result(column=&quot;last_name&quot;, property=&quot;lastName&quot;, jdbcType=JdbcType.VARCHAR),
            @Result(column=&quot;birth_date&quot;, property=&quot;birthDate&quot;, jdbcType=JdbcType.DATE),
            @Result(column=&quot;employed&quot;, property=&quot;employed&quot;, jdbcType=JdbcType.VARCHAR, typeHandler=YesNoTypeHandler.class),
            @Result(column=&quot;occupation&quot;, property=&quot;occupation&quot;, jdbcType=JdbcType.VARCHAR)
    })
    List&lt;SimpleTableRecord&gt; selectMany(SelectStatement selectStatement);
    
    default QueryExpressionDSL&lt;MyBatis3SelectModelAdapter&lt;List&lt;SimpleTableRecord&gt;&gt;&gt; selectByExample() {
        return SelectDSL.select(this::selectMany, id.as(&quot;A_ID&quot;), firstName, lastName, birthDate, employed, occupation)
            .from(simpleTable);
    }
    
}
</pre></div></div>
<p>Notice the <tt>selectByExample</tt> method - it specifies the column list and table name and returns the intermediate builder that can be used to finish the WHERE clause. It also reuses the <tt>selectMany</tt> mapper method. Mapper methods built using this added support all finish with an <tt>execute</tt> method that builds the statement and executes the mapper method.</p>
<p>The code is used like this:</p>

<div class="source">
<div class="source"><pre class="prettyprint">    List&lt;SimpleTableRecord&gt; rows = mapper.selectByExample()
            .where(id, isEqualTo(1))
            .or(occupation, isNull())
            .build()
            .execute();
</pre></div></div>
<p>It is expected that MyBatis Generator will generate code that looks like this.</p>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2016&#x2013;2017
<a href="http://www.mybatis.org/">MyBatis.org</a>.
All rights reserved.</p>
        </div>
        </div>
    </footer>
    </body>
</html>

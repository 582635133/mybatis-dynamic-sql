# Extending MyBatis Dynamic SQL

The library has been design for extension from the very start of the design.  We do not believe that the library covers all possible uses and we wanted to make it easy to add functionality that suits the needs of dependent projects.

This page details the main extension points of the library. 

## Writing a Custom Where Condition

TODO...

## Supporting Calculated Columns

TODO...

## Writing Custom Rendering Strategies

A RenderingStrategy is used to format the parameter placeholders in generated SQL. The library ships with two built-in rendering strategies:

1. A strategy that is suitable for MyBatis3.  This strategy generates placeholders in the format required by MyBatis3 (for example `#{foo,jdbcType=INTEGER}`).
2. A strategy that is suitable for the Spring NamedParameterJDBCTemplate. This strategy generates placeholders in the format required by Spring (for example `:foo`).

You can write a custom rendering strategy if you want to use the library with some other framework.  For example, if you wanted to use the library to generate SQL that could be prepared directly by JDBC, you could write a rendering strategy that simply uses the question mark (`?`) for all parameters.

```java
import org.mybatis.dynamic.sql.SqlColumn;
import org.mybatis.dynamic.sql.render.RenderingStrategy;

public class PlainJDBCRenderingStrategy extends RenderingStrategy {
    @Override
    public String getFormattedJdbcPlaceholder(SqlColumn<?> column, String prefix, String parameterName) {
        return "?";
    }
}

```
The library will pass the following parameters to the `getFormattedJdbcPlaceholder` method:

1. `column` - the column definition for the current placeholder
2. `prefix` - For INSERT statements the value will be "record", for all other statements (including inserts with selects) the value will be "parameters"
3. `parameterName` - this will be the unique name for the the parameter.  For INSERT statements, the name will be the property of the inserted record that is mapped to this parameter.  For all other statements (including inserts with selects) a unique name will be generated by the library.  That unique name will also be used to place the value of the parameter into the parameters Map.

## Writing Custom Renderers

SQL rendering is accomplished be classes that are decoupled from the SQL model classes.  All the model classes have a `render` method that calls the built-in default renderers.  But this is completely optional and you do not need to use it.  You can write your own rendering support if you are dissatisfied with the SQL produced by the default renderers.

Writing a custom renderer is quite complex.  If you want to undertake that task, we suggest that you take the time to understand how the default renderers work first.  And feel free to ask questions about this topic on the MyBatis mailing list.
